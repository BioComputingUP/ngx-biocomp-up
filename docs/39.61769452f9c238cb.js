"use strict";(self.webpackChunkdemo_showcase=self.webpackChunkdemo_showcase||[]).push([[39],{3039:(A,m,u)=>{u.r(m),u.d(m,{PageSequenceViewerComponent:()=>P});const b={A:{background:"#FFBF00",color:"#000000"},R:{background:"#FF0000",color:"#FFFFFF"},N:{background:"#00FFFF",color:"#000000"},D:{background:"#0000FF",color:"#FFFFFF"},C:{background:"#FFFF00",color:"#000000"},Q:{background:"#00FF00",color:"#000000"},E:{background:"#FF00FF",color:"#FFFFFF"},G:{background:"#808080",color:"#FFFFFF"},H:{background:"#008000",color:"#FFFFFF"},I:{background:"#FFA500",color:"#000000"},L:{background:"#FFA500",color:"#000000"},K:{background:"#FF0000",color:"#FFFFFF"},M:{background:"#FFA500",color:"#000000"},F:{background:"#FFA500",color:"#000000"},P:{background:"#800080",color:"#FFFFFF"},S:{background:"#00FF00",color:"#000000"},T:{background:"#00FF00",color:"#000000"},W:{background:"#FFA500",color:"#000000"},Y:{background:"#FFA500",color:"#000000"},V:{background:"#FFA500",color:"#000000"},B:{background:"#FFA500",color:"#000000"},Z:{background:"#FFA500",color:"#000000"},X:{background:"#FFA500",color:"#000000"},"-":{background:"#FFFFFF",color:"#000000"}};var f=u(6354),C=u(9172),$=u(140),q=u(9568),v=u(4412),e=u(4438);let p=(()=>{class r{constructor(){this.selected$=new v.t(void 0)}set selected(o){this.selected$.next(o)}get selected(){return this.selected$.value}onMouseDown(o,n){this.selected=this.selected?void 0:{start:n,end:n,type:"range"}}onMouseEnter(o,n){1===o.buttons&&this.selected&&(this.selected={...this.selected,end:n})}static#e=this.\u0275fac=function(n){return new(n||r)};static#o=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),x=(()=>{class r{set positions(o){this.input$.next(o)}get positions(){return this.input$.value}constructor(o){this.selectionService=o,this.input$=new v.t([])}static#e=this.\u0275fac=function(n){return new(n||r)(e.KVO(p))};static#o=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();var l=u(177);function S(r,a){if(1&r){const o=e.RV6();e.j41(0,"div",4),e.bIt("mouseenter",function(t){const s=e.eBV(o).$index,c=e.XpG();return e.Njj(c.onMouseEnter(t,c.index[s]))})("mousedown",function(t){const s=e.eBV(o).$index,c=e.XpG();return e.Njj(c.onMouseDown(t,c.index[s]))})("mouseup",function(t){e.eBV(o);const s=e.XpG();return e.Njj(s.onMouseUp(t))}),e.EFF(1),e.k0s()}if(2&r){const o=a.$implicit,n=a.$index,t=e.XpG();e.xc7("background",null==o?null:o.background)("color",null==o?null:o.color),e.Y8G("id","index-residue-"+n),e.R7$(),e.SpI(" ",t.index[n]," ")}}function y(r,a){if(1&r){const o=e.RV6();e.j41(0,"div",5),e.bIt("mouseenter",function(t){const s=e.eBV(o).$index,c=e.XpG();return e.Njj(c.onMouseEnter(t,c.index[s]))})("mousedown",function(t){const s=e.eBV(o).$index,c=e.XpG();return e.Njj(c.onMouseDown(t,c.index[s]))})("mouseup",function(t){e.eBV(o);const s=e.XpG();return e.Njj(s.onMouseUp(t))}),e.EFF(1),e.k0s()}if(2&r){const o=a.$implicit,n=a.$index,t=e.XpG();e.xc7("background",t.colors[o].background||t.colors["-"].background)("color",t.colors[o].color||t.colors["-"].color),e.Y8G("id","sequence-residue-"+n),e.R7$(),e.SpI(" ",o," ")}}let V=(()=>{class r{set positions(o){this.positionsService.positions=o}get positions(){return this.positionsService.positions}constructor(o,n){this.positionsService=o,this.selectionService=n,this.selected$=this.selectionService.selected$,this.positions$=this.selectionService.selected$.pipe((0,f.T)(t=>({...t,background:"#FFFFFF",color:"#000000"})),(0,C.Z)(void 0),(0,$.v)(this.positionsService.input$),(0,f.T)(([t,s])=>{s=[...s];const c=new Map(this.index.map((F,d)=>[F,d])),i=t?.start,g=t?.end;if(null!=i&&null!=g){let F=c.get(i),d=c.get(g);F>d&&([F,d]=[d,F]),s.splice(F,d-F+1,...Array(d-F+1).fill(t))}return s}),(0,q.t)(1))}ngOnChanges(o){if(o){if(o.sequence||o.index){if("string"==typeof this.sequence){if(!this.description&&">"===this.sequence[0]){const[c,...i]=this.sequence.split("\n");this.description=c,this.sequence=i.join("\n")}this.sequence=this.sequence.replace(/[\n\r\s\t]+/g,"").split("")}this.index||(this.index=Array.from({length:this.sequence.length},(c,i)=>i+1))}this.colors||(this.colors=b);const n=new Map(this.index.map((c,i)=>[c,i])),t=new Array(this.index.length).fill(void 0),s=(this.loci||[]).map(({start:c,end:i,type:g,background:F,color:d})=>{const _=n.get(c),w=void 0!==i?n.get(i):c,M={start:_,end:w,type:g,background:F,color:d};for(let h=_;h<=w;h++)t[h]=M;return M});s.sort((c,i)=>c.start-i.start||(c.end||0)-(i.end||0)),this.loci=s,this.positions=t}}onMouseUp(o){}onMouseDown(o,n){this.selectionService.onMouseDown(o,n)}onMouseEnter(o,n){this.selectionService.onMouseEnter(o,n)}static#e=this.\u0275fac=function(n){return new(n||r)(e.rXU(x),e.rXU(p))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["ngx-sequence-viewer"]],inputs:{loci:"loci",index:"index",sequence:"sequence",colors:"colors",description:"description"},outputs:{selected$:"selected"},standalone:!0,features:[e.Jv_([x,p]),e.OA$,e.aNF],decls:7,vars:2,consts:[[1,"index"],[1,"index-residue",3,"id","background","color"],[1,"sequence"],[1,"sequence-residue",3,"id","background","color"],[1,"index-residue",3,"mouseenter","mousedown","mouseup","id"],[1,"sequence-residue",3,"mouseenter","mousedown","mouseup","id"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.Z7z(1,S,2,6,"div",1,e.Vm6),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",2),e.Z7z(5,y,2,6,"div",3,e.Vm6),e.k0s()),2&n&&(e.R7$(),e.Dyx(e.bMT(3,0,t.positions$)),e.R7$(4),e.Dyx(t.sequence))},dependencies:[l.MD,l.Jj],styles:["[_nghost-%COMP%]{cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .sequence[_ngcontent-%COMP%], [_nghost-%COMP%]   .index[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch}[_nghost-%COMP%]   .sequence[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], [_nghost-%COMP%]   .index[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:0 0 auto;display:block;height:1rem;width:1rem;text-align:center;font-size:inherit;line-height:1rem}[_nghost-%COMP%]   .sequence[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center;vertical-align:center}[_nghost-%COMP%]   .index[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:auto;text-align:left;transform:rotate(-180deg);writing-mode:vertical-rl;white-space:nowrap;padding-bottom:.25rem;padding-top:.25rem}"]})}return r})();var k=u(3286);function j(r,a){if(1&r&&e.nrm(0,"ngx-sequence-viewer",6),2&r){const o=e.XpG();e.Y8G("sequence",o.sequence)("index",o.index)("loci",o.loci)("colors",o.colors)}}let P=(()=>{class r{constructor(o,n){this.structureService=o,this.location=n,this.loci=[{start:"12",end:"43",type:"range",background:"#007A78",color:"#FFC745"},{start:"57",end:"58",type:"range",background:"#BDE673",color:"#000000"}],this.colors=b,this.structure$=this.structureService.structure$,this._structure=this.structure$.subscribe(()=>{this.sequence=this.structureService.residues.map(({authCompId1:s})=>s),this.index=this.structureService.residues.map(({authSeqId:s,pdbInsCode:c})=>s+c)});const t=this.location.prepareExternalUrl("assets/8vap.A.cif");this.source=this.structureService.source={type:"remote",label:"8VAP",binary:!1,format:"mmcif",link:t}}ngOnDestroy(){this._structure.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||r)(e.rXU(k.Z),e.rXU(l.aZ))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["app-page-sequence-viewer"]],standalone:!0,features:[e.Jv_([k.Z]),e.aNF],decls:17,vars:6,consts:[[1,"container","pt-3"],[1,"row"],[1,"col-7"],[1,"col-5"],[1,"rounded","bg-body-tertiary","p-3"],["id","sequence-viewer-structure",1,"d-block","rounded","border","w-100","h-auto",2,"overflow-x","auto","overflow-y","hidden"],[3,"sequence","index","loci","colors"]],template:function(n,t){1&n&&(e.j41(0,"div",0)(1,"h1"),e.EFF(2,"Sequence viewer"),e.k0s(),e.j41(3,"div")(4,"h2"),e.EFF(5,"Visualize structure"),e.k0s(),e.j41(6,"div",1)(7,"div",2),e.EFF(8," In this example, the sequence underlying the PDB structure `1BRR`, chain `A` is shown. The colouring scheme chosen is based on the structural characteristics of the amino acids. "),e.k0s(),e.j41(9,"div",3)(10,"code")(11,"pre",4),e.EFF(12),e.nI1(13,"json"),e.k0s()()()(),e.j41(14,"div",5),e.DNE(15,j,1,4,"ngx-sequence-viewer",6),e.nI1(16,"async"),e.k0s()()()),2&n&&(e.R7$(12),e.JRh(e.bMT(13,2,t.source)),e.R7$(3),e.vxM(15,e.bMT(16,4,t.structure$)?15:-1))},dependencies:[l.MD,l.Jj,l.TG,V]})}return r})()}}]);