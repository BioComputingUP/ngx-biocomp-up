var je=Object.create;var er=Object.defineProperty,Ce=Object.defineProperties,Fe=Object.getOwnPropertyDescriptor,ke=Object.getOwnPropertyDescriptors,Re=Object.getOwnPropertyNames,rr=Object.getOwnPropertySymbols,Me=Object.getPrototypeOf,Ar=Object.prototype.hasOwnProperty,Hr=Object.prototype.propertyIsEnumerable;var Tr=(r,e)=>(e=Symbol[r])?e:Symbol.for("Symbol."+r);var Br=(r,e,t)=>e in r?er(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,It=(r,e)=>{for(var t in e||={})Ar.call(e,t)&&Br(r,t,e[t]);if(rr)for(var t of rr(e))Hr.call(e,t)&&Br(r,t,e[t]);return r},Tt=(r,e)=>Ce(r,ke(e));var At=(r,e)=>{var t={};for(var o in r)Ar.call(r,o)&&e.indexOf(o)<0&&(t[o]=r[o]);if(r!=null&&rr)for(var o of rr(r))e.indexOf(o)<0&&Hr.call(r,o)&&(t[o]=r[o]);return t};var Pt=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),jt=(r,e)=>{for(var t in e)er(r,t,{get:e[t],enumerable:!0})},Le=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Re(e))!Ar.call(r,n)&&n!==t&&er(r,n,{get:()=>e[n],enumerable:!(o=Fe(e,n))||o.enumerable});return r};var Ct=(r,e,t)=>(t=r!=null?je(Me(r)):{},Le(e||!r||!r.__esModule?er(t,"default",{value:r,enumerable:!0}):t,r));var Ft=(r,e,t)=>new Promise((o,n)=>{var i=f=>{try{p(t.next(f))}catch(c){n(c)}},s=f=>{try{p(t.throw(f))}catch(c){n(c)}},p=f=>f.done?o(f.value):Promise.resolve(f.value).then(i,s);p((t=t.apply(r,e)).next())}),We=function(r,e){this[0]=r,this[1]=e};var kt=r=>{var e=r[Tr("asyncIterator")],t=!1,o,n={};return e==null?(e=r[Tr("iterator")](),o=i=>n[i]=s=>e[i](s)):(e=e.call(r),o=i=>n[i]=s=>{if(t){if(t=!1,i==="throw")throw s;return s}return t=!0,{done:!1,value:new We(new Promise(p=>{var f=e[i](s);if(!(f instanceof Object))throw TypeError("Object expected");p(f)}),1)}}),n[Tr("iterator")]=()=>n,o("next"),"throw"in e?o("throw"):n.throw=i=>{throw i},"return"in e&&o("return"),n};function u(r){return typeof r=="function"}function Y(r){let t=r(o=>{Error.call(o),o.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var tr=Y(r=>function(t){r(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((o,n)=>`${n+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function k(r,e){if(r){let t=r.indexOf(e);0<=t&&r.splice(t,1)}}var w=class r{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:o}=this;if(u(o))try{o()}catch(i){e=i instanceof tr?i.errors:[i]}let{_finalizers:n}=this;if(n){this._finalizers=null;for(let i of n)try{Jr(i)}catch(s){e=e??[],s instanceof tr?e=[...e,...s.errors]:e.push(s)}}if(e)throw new tr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Jr(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&k(t,e)}remove(e){let{_finalizers:t}=this;t&&k(t,e),e instanceof r&&e._removeParent(this)}};w.EMPTY=(()=>{let r=new w;return r.closed=!0,r})();var Pr=w.EMPTY;function or(r){return r instanceof w||r&&"closed"in r&&u(r.remove)&&u(r.add)&&u(r.unsubscribe)}function Jr(r){u(r)?r():r.unsubscribe()}function v(r){return r}function jr(...r){return Cr(r)}function Cr(r){return r.length===0?v:r.length===1?r[0]:function(t){return r.reduce((o,n)=>n(o),t)}}var O={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var N={setTimeout(r,e,...t){let{delegate:o}=N;return o?.setTimeout?o.setTimeout(r,e,...t):setTimeout(r,e,...t)},clearTimeout(r){let{delegate:e}=N;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0};function nr(r){N.setTimeout(()=>{let{onUnhandledError:e}=O;if(e)e(r);else throw r})}function R(){}var Zr=Fr("C",void 0,void 0);function Qr(r){return Fr("E",void 0,r)}function Xr(r){return Fr("N",r,void 0)}function Fr(r,e,t){return{kind:r,value:e,error:t}}var M=null;function q(r){if(O.useDeprecatedSynchronousErrorHandling){let e=!M;if(e&&(M={errorThrown:!1,error:null}),r(),e){let{errorThrown:t,error:o}=M;if(M=null,t)throw o}}else r()}function re(r){O.useDeprecatedSynchronousErrorHandling&&M&&(M.errorThrown=!0,M.error=r)}var L=class extends w{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,or(e)&&e.add(this)):this.destination=ze}static create(e,t,o){return new A(e,t,o)}next(e){this.isStopped?Rr(Xr(e),this):this._next(e)}error(e){this.isStopped?Rr(Qr(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Rr(Zr,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Ue=Function.prototype.bind;function kr(r,e){return Ue.call(r,e)}var Mr=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(o){ir(o)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(o){ir(o)}else ir(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ir(t)}}},A=class extends L{constructor(e,t,o){super();let n;if(u(e)||!e)n={next:e??void 0,error:t??void 0,complete:o??void 0};else{let i;this&&O.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),n={next:e.next&&kr(e.next,i),error:e.error&&kr(e.error,i),complete:e.complete&&kr(e.complete,i)}):n=e}this.destination=new Mr(n)}};function ir(r){O.useDeprecatedSynchronousErrorHandling?re(r):nr(r)}function De(r){throw r}function Rr(r,e){let{onStoppedNotification:t}=O;t&&N.setTimeout(()=>t(r,e))}var ze={closed:!0,next:R,error:De,complete:R};var G=typeof Symbol=="function"&&Symbol.observable||"@@observable";var a=(()=>{class r{constructor(t){t&&(this._subscribe=t)}lift(t){let o=new r;return o.source=this,o.operator=t,o}subscribe(t,o,n){let i=Ye(t)?t:new A(t,o,n);return q(()=>{let{operator:s,source:p}=this;i.add(s?s.call(i,p):p?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(o){t.error(o)}}forEach(t,o){return o=ee(o),new o((n,i)=>{let s=new A({next:p=>{try{t(p)}catch(f){i(f),s.unsubscribe()}},error:i,complete:n});this.subscribe(s)})}_subscribe(t){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(t)}[G](){return this}pipe(...t){return Cr(t)(this)}toPromise(t){return t=ee(t),new t((o,n)=>{let i;this.subscribe(s=>i=s,s=>n(s),()=>o(i))})}}return r.create=e=>new r(e),r})();function ee(r){var e;return(e=r??O.Promise)!==null&&e!==void 0?e:Promise}function Ve(r){return r&&u(r.next)&&u(r.error)&&u(r.complete)}function Ye(r){return r&&r instanceof L||Ve(r)&&or(r)}function Lr(r){return u(r?.lift)}function l(r){return e=>{if(Lr(e))return e.lift(function(t){try{return r(t,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function m(r,e,t,o,n){return new Wr(r,e,t,o,n)}var Wr=class extends L{constructor(e,t,o,n,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(p){try{t(p)}catch(f){e.error(f)}}:super._next,this._error=n?function(p){try{n(p)}catch(f){e.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(p){e.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ur(){return l((r,e)=>{let t=null;r._refCount++;let o=m(e,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount){t=null;return}let n=r._connection,i=t;t=null,n&&(!i||n===i)&&n.unsubscribe(),e.unsubscribe()});r.subscribe(o),o.closed||(t=r.connect())})}var Dr=class extends a{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Lr(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new w;let t=this.getSubject();e.add(this.source.subscribe(m(t,void 0,()=>{this._teardown(),t.complete()},o=>{this._teardown(),t.error(o)},()=>this._teardown()))),e.closed&&(this._connection=null,e=w.EMPTY)}return e}refCount(){return Ur()(this)}};var te=Y(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var P=(()=>{class r extends a{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let o=new sr(this,this);return o.operator=t,o}_throwIfClosed(){if(this.closed)throw new te}next(t){q(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let o of this.currentObservers)o.next(t)}})}error(t){q(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:o}=this;for(;o.length;)o.shift().error(t)}})}complete(){q(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:o,isStopped:n,observers:i}=this;return o||n?Pr:(this.currentObservers=null,i.push(t),new w(()=>{this.currentObservers=null,k(i,t)}))}_checkFinalizedStatuses(t){let{hasError:o,thrownError:n,isStopped:i}=this;o?t.error(n):i&&t.complete()}asObservable(){let t=new a;return t.source=this,t}}return r.create=(e,t)=>new sr(e,t),r})(),sr=class extends P{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.next)===null||o===void 0||o.call(t,e)}error(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.error)===null||o===void 0||o.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,o;return(o=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&o!==void 0?o:Pr}};var zr=class extends P{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:o}=this;if(e)throw t;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}};var W=new a(r=>r.complete());function ne(r,e,t,o){function n(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function p(h){try{c(o.next(h))}catch(b){s(b)}}function f(h){try{c(o.throw(h))}catch(b){s(b)}}function c(h){h.done?i(h.value):n(h.value).then(p,f)}c((o=o.apply(r,e||[])).next())})}function oe(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],o=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(r){return this instanceof U?(this.v=r,this):new U(r)}function ie(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(r,e||[]),n,i=[];return n={},p("next"),p("throw"),p("return",s),n[Symbol.asyncIterator]=function(){return this},n;function s(d){return function(y){return Promise.resolve(y).then(d,b)}}function p(d,y){o[d]&&(n[d]=function(_){return new Promise(function(F,S){i.push([d,_,F,S])>1||f(d,_)})},y&&(n[d]=y(n[d])))}function f(d,y){try{c(o[d](y))}catch(_){E(i[0][3],_)}}function c(d){d.value instanceof U?Promise.resolve(d.value.v).then(h,b):E(i[0][2],d)}function h(d){f("next",d)}function b(d){f("throw",d)}function E(d,y){d(y),i.shift(),i.length&&f(i[0][0],i[0][1])}}function se(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof oe=="function"?oe(r):r[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(i){t[i]=r[i]&&function(s){return new Promise(function(p,f){s=r[i](s),n(p,f,s.done,s.value)})}}function n(i,s,p,f){Promise.resolve(f).then(function(c){i({value:c,done:p})},s)}}var fr=r=>r&&typeof r.length=="number"&&typeof r!="function";function pr(r){return u(r?.then)}function cr(r){return u(r[G])}function lr(r){return Symbol.asyncIterator&&u(r?.[Symbol.asyncIterator])}function mr(r){return new TypeError(`You provided ${r!==null&&typeof r=="object"?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Ne(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ur=Ne();function ar(r){return u(r?.[ur])}function hr(r){return ie(this,arguments,function*(){let t=r.getReader();try{for(;;){let{value:o,done:n}=yield U(t.read());if(n)return yield U(void 0);yield yield U(o)}}finally{t.releaseLock()}})}function dr(r){return u(r?.getReader)}function x(r){if(r instanceof a)return r;if(r!=null){if(cr(r))return qe(r);if(fr(r))return Ge(r);if(pr(r))return Ke(r);if(lr(r))return fe(r);if(ar(r))return $e(r);if(dr(r))return Be(r)}throw mr(r)}function qe(r){return new a(e=>{let t=r[G]();if(u(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ge(r){return new a(e=>{for(let t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function Ke(r){return new a(e=>{r.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,nr)})}function $e(r){return new a(e=>{for(let t of r)if(e.next(t),e.closed)return;e.complete()})}function fe(r){return new a(e=>{He(r,e).catch(t=>e.error(t))})}function Be(r){return fe(hr(r))}function He(r,e){var t,o,n,i;return ne(this,void 0,void 0,function*(){try{for(t=se(r);o=yield t.next(),!o.done;){let s=o.value;if(e.next(s),e.closed)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=t.return)&&(yield i.call(t))}finally{if(n)throw n.error}}e.complete()})}function g(r,e,t,o=0,n=!1){let i=e.schedule(function(){t(),n?r.add(this.schedule(null,o)):this.unsubscribe()},o);if(r.add(i),!n)return i}function xr(r,e=0){return l((t,o)=>{t.subscribe(m(o,n=>g(o,r,()=>o.next(n),e),()=>g(o,r,()=>o.complete(),e),n=>g(o,r,()=>o.error(n),e)))})}function br(r,e=0){return l((t,o)=>{o.add(r.schedule(()=>t.subscribe(o),e))})}function pe(r,e){return x(r).pipe(br(e),xr(e))}function ce(r,e){return x(r).pipe(br(e),xr(e))}function le(r,e){return new a(t=>{let o=0;return e.schedule(function(){o===r.length?t.complete():(t.next(r[o++]),t.closed||this.schedule())})})}function me(r,e){return new a(t=>{let o;return g(t,e,()=>{o=r[ur](),g(t,e,()=>{let n,i;try{({value:n,done:i}=o.next())}catch(s){t.error(s);return}i?t.complete():t.next(n)},0,!0)}),()=>u(o?.return)&&o.return()})}function yr(r,e){if(!r)throw new Error("Iterable cannot be null");return new a(t=>{g(t,e,()=>{let o=r[Symbol.asyncIterator]();g(t,e,()=>{o.next().then(n=>{n.done?t.complete():t.next(n.value)})},0,!0)})})}function ue(r,e){return yr(hr(r),e)}function ae(r,e){if(r!=null){if(cr(r))return pe(r,e);if(fr(r))return le(r,e);if(pr(r))return ce(r,e);if(lr(r))return yr(r,e);if(ar(r))return me(r,e);if(dr(r))return ue(r,e)}throw mr(r)}function I(r,e){return e?ae(r,e):x(r)}function vr(r){return r&&u(r.schedule)}function Vr(r){return r[r.length-1]}function K(r){return u(Vr(r))?r.pop():void 0}function T(r){return vr(Vr(r))?r.pop():void 0}function he(r,e){return typeof Vr(r)=="number"?r.pop():e}function Je(...r){let e=T(r);return I(r,e)}function Ze(r,e){let t=u(r)?r:()=>r,o=n=>n.error(t());return new a(e?n=>e.schedule(o,0,n):o)}function Qe(r){return!!r&&(r instanceof a||u(r.lift)&&u(r.subscribe))}var D=Y(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function j(r,e){return l((t,o)=>{let n=0;t.subscribe(m(o,i=>{o.next(r.call(e,i,n++))}))})}var{isArray:Xe}=Array,{getPrototypeOf:rt,prototype:et,keys:tt}=Object;function de(r){if(r.length===1){let e=r[0];if(Xe(e))return{args:e,keys:null};if(ot(e)){let t=tt(e);return{args:t.map(o=>e[o]),keys:t}}}return{args:r,keys:null}}function ot(r){return r&&typeof r=="object"&&rt(r)===et}var{isArray:nt}=Array;function it(r,e){return nt(e)?r(...e):r(e)}function _r(r){return j(e=>it(r,e))}function xe(r,e){return r.reduce((t,o,n)=>(t[o]=e[n],t),{})}function st(...r){let e=T(r),t=K(r),{args:o,keys:n}=de(r);if(o.length===0)return I([],e);let i=new a(Yr(o,e,n?s=>xe(n,s):v));return t?i.pipe(_r(t)):i}function Yr(r,e,t=v){return o=>{be(e,()=>{let{length:n}=r,i=new Array(n),s=n,p=n;for(let f=0;f<n;f++)be(e,()=>{let c=I(r[f],e),h=!1;c.subscribe(m(o,b=>{i[f]=b,h||(h=!0,p--),p||o.next(t(i.slice()))},()=>{--s||o.complete()}))},o)},o)}}function be(r,e,t){r?g(t,r,e):e()}function ye(r,e,t,o,n,i,s,p){let f=[],c=0,h=0,b=!1,E=()=>{b&&!f.length&&!c&&e.complete()},d=_=>c<o?y(_):f.push(_),y=_=>{i&&e.next(_),c++;let F=!1;x(t(_,h++)).subscribe(m(e,S=>{n?.(S),i?d(S):e.next(S)},()=>{F=!0},void 0,()=>{if(F)try{for(c--;f.length&&c<o;){let S=f.shift();s?g(e,s,()=>y(S)):y(S)}E()}catch(S){e.error(S)}}))};return r.subscribe(m(e,d,()=>{b=!0,E()})),()=>{p?.()}}function z(r,e,t=1/0){return u(e)?z((o,n)=>j((i,s)=>e(o,i,n,s))(x(r(o,n))),t):(typeof e=="number"&&(t=e),l((o,n)=>ye(o,n,r,t)))}function B(r=1/0){return z(v,r)}function ve(){return B(1)}function wr(...r){return ve()(I(r,T(r)))}function ft(r){return new a(e=>{x(r()).subscribe(e)})}var Sr=class extends w{constructor(e,t){super()}schedule(e,t=0){return this}};var H={setInterval(r,e,...t){let{delegate:o}=H;return o?.setInterval?o.setInterval(r,e,...t):setInterval(r,e,...t)},clearInterval(r){let{delegate:e}=H;return(e?.clearInterval||clearInterval)(r)},delegate:void 0};var gr=class extends Sr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var o;if(this.closed)return this;this.state=e;let n=this.id,i=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,o=0){return H.setInterval(e.flush.bind(e,this),o)}recycleAsyncId(e,t,o=0){if(o!=null&&this.delay===o&&this.pending===!1)return t;t!=null&&H.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let o=this._execute(e,t);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o=!1,n;try{this.work(e)}catch(i){o=!0,n=i||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),n}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:o}=t;this.work=this.state=this.scheduler=null,this.pending=!1,k(o,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var J={now(){return(J.delegate||Date).now()},delegate:void 0};var $=class r{constructor(e,t=r.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,o){return new this.schedulerActionCtor(this,e).schedule(o,t)}};$.now=J.now;var Er=class extends ${constructor(e,t=$.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let o;this._active=!0;do if(o=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,o){for(;e=t.shift();)e.unsubscribe();throw o}}};var V=new Er(gr),_e=V;function we(r){return r instanceof Date&&!isNaN(r)}function Or(r=0,e,t=_e){let o=-1;return e!=null&&(vr(e)?t=e:o=e),new a(n=>{let i=we(r)?+r-t.now():r;i<0&&(i=0);let s=0;return t.schedule(function(){n.closed||(n.next(s++),0<=o?this.schedule(void 0,o):n.complete())},i)})}function pt(r=0,e=V){return r<0&&(r=0),Or(r,r,e)}function C(r,e){return l((t,o)=>{let n=0;t.subscribe(m(o,i=>r.call(e,i,n++)&&o.next(i)))})}function Nr(r){return l((e,t)=>{let o=null,n=!1,i;o=e.subscribe(m(t,void 0,void 0,s=>{i=x(r(s,Nr(r)(e))),o?(o.unsubscribe(),o=null,i.subscribe(t)):n=!0})),n&&(o.unsubscribe(),o=null,i.subscribe(t))})}var{isArray:ct}=Array;function Se(r){return r.length===1&&ct(r[0])?r[0]:r}function qr(...r){let e=K(r);return e?jr(qr(...r),_r(e)):l((t,o)=>{Yr([t,...Se(r)])(o)})}function lt(...r){return qr(...r)}function mt(r,e){return u(e)?z(r,e,1):z(r,1)}function Z(r){return l((e,t)=>{let o=!1;e.subscribe(m(t,n=>{o=!0,t.next(n)},()=>{o||t.next(r),t.complete()}))})}function Gr(r){return r<=0?()=>W:l((e,t)=>{let o=0;e.subscribe(m(t,n=>{++o<=r&&(t.next(n),r<=o&&t.complete())}))})}function ut(r){return j(()=>r)}function at(r){return l((e,t)=>{try{e.subscribe(t)}finally{t.add(r)}})}function Ir(r=ht){return l((e,t)=>{let o=!1;e.subscribe(m(t,n=>{o=!0,t.next(n)},()=>o?t.complete():t.error(r())))})}function ht(){return new D}function dt(r,e){let t=arguments.length>=2;return o=>o.pipe(r?C((n,i)=>r(n,i,o)):v,Gr(1),t?Z(e):Ir(()=>new D))}function Kr(r){return r<=0?()=>W:l((e,t)=>{let o=[];e.subscribe(m(t,n=>{o.push(n),r<o.length&&o.shift()},()=>{for(let n of o)t.next(n);t.complete()},void 0,()=>{o=null}))})}function xt(r,e){let t=arguments.length>=2;return o=>o.pipe(r?C((n,i)=>r(n,i,o)):v,Kr(1),t?Z(e):Ir(()=>new D))}function ge(r,e,t,o,n){return(i,s)=>{let p=t,f=e,c=0;i.subscribe(m(s,h=>{let b=c++;f=p?r(f,h,b):(p=!0,h),o&&s.next(f)},n&&(()=>{p&&s.next(f),s.complete()})))}}function bt(r,e){return l(ge(r,e,arguments.length>=2,!0))}var Q=class extends P{constructor(e=1/0,t=1/0,o=J){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:o,_infiniteTimeWindow:n,_timestampProvider:i,_windowTime:s}=this;t||(o.push(e),!n&&o.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:o,_buffer:n}=this,i=n.slice();for(let s=0;s<i.length&&!e.closed;s+=o?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:n}=this,i=(n?1:2)*e;if(e<1/0&&i<o.length&&o.splice(0,o.length-i),!n){let s=t.now(),p=0;for(let f=1;f<o.length&&o[f]<=s;f+=2)p=f;p&&o.splice(0,p+1)}}};function Ee(r={}){let{connector:e=()=>new P,resetOnError:t=!0,resetOnComplete:o=!0,resetOnRefCountZero:n=!0}=r;return i=>{let s,p,f,c=0,h=!1,b=!1,E=()=>{p?.unsubscribe(),p=void 0},d=()=>{E(),s=f=void 0,h=b=!1},y=()=>{let _=s;d(),_?.unsubscribe()};return l((_,F)=>{c++,!b&&!h&&E();let S=f=f??e();F.add(()=>{c--,c===0&&!b&&!h&&(p=$r(y,n))}),S.subscribe(F),!s&&c>0&&(s=new A({next:X=>S.next(X),error:X=>{b=!0,E(),p=$r(d,t,X),S.error(X)},complete:()=>{h=!0,E(),p=$r(d,o),S.complete()}}),x(_).subscribe(s))})(i)}}function $r(r,e,...t){if(e===!0){r();return}if(e===!1)return;let o=new A({next:()=>{o.unsubscribe(),r()}});return x(e(...t)).subscribe(o)}function yt(r,e,t){let o,n=!1;return r&&typeof r=="object"?{bufferSize:o=1/0,windowTime:e=1/0,refCount:n=!1,scheduler:t}=r:o=r??1/0,Ee({connector:()=>new Q(o,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:n})}function Oe(...r){let e=T(r);return l((t,o)=>{(e?wr(r,t,e):wr(r,t)).subscribe(o)})}function Ie(r,e){return l((t,o)=>{let n=null,i=0,s=!1,p=()=>s&&!n&&o.complete();t.subscribe(m(o,f=>{n?.unsubscribe();let c=0,h=i++;x(r(f,h)).subscribe(n=m(o,b=>o.next(e?e(f,b,h,c++):b),()=>{n=null,p()}))},()=>{s=!0,p()}))})}function vt(r){return l((e,t)=>{x(r).subscribe(m(t,()=>t.complete(),R)),!t.closed&&e.subscribe(t)})}function Te(r,e,t){let o=u(r)||e||t?{next:r,error:e,complete:t}:r;return o?l((n,i)=>{var s;(s=o.subscribe)===null||s===void 0||s.call(o);let p=!0;n.subscribe(m(i,f=>{var c;(c=o.next)===null||c===void 0||c.call(o,f),i.next(f)},()=>{var f;p=!1,(f=o.complete)===null||f===void 0||f.call(o),i.complete()},f=>{var c;p=!1,(c=o.error)===null||c===void 0||c.call(o,f),i.error(f)},()=>{var f,c;p&&((f=o.unsubscribe)===null||f===void 0||f.call(o)),(c=o.finalize)===null||c===void 0||c.call(o)}))}):v}function _t(...r){let e=T(r),t=he(r,1/0),o=r;return o.length?o.length===1?x(o[0]):B(t)(I(o,e)):W}function wt(r,e=V){return l((t,o)=>{let n=null,i=null,s=null,p=()=>{if(n){n.unsubscribe(),n=null;let c=i;i=null,o.next(c)}};function f(){let c=s+r,h=e.now();if(h<c){n=this.schedule(void 0,c-h),o.add(n);return}p()}t.subscribe(m(o,c=>{i=c,s=e.now(),n||(n=e.schedule(f,r),o.add(n))},()=>{p(),o.complete()},void 0,()=>{i=n=null}))})}function St(r,e=v){return r=r??gt,l((t,o)=>{let n,i=!0;t.subscribe(m(o,s=>{let p=e(s);(i||!r(n,p))&&(i=!1,n=p,o.next(s))}))})}function gt(r,e){return r===e}function Et(r){return C((e,t)=>r<=t)}function Ae(r,e){return l((t,o)=>{let{leading:n=!0,trailing:i=!1}=e??{},s=!1,p=null,f=null,c=!1,h=()=>{f?.unsubscribe(),f=null,i&&(d(),c&&o.complete())},b=()=>{f=null,c&&o.complete()},E=y=>f=x(r(y)).subscribe(m(o,h,b)),d=()=>{if(s){s=!1;let y=p;p=null,o.next(y),!c&&E(y)}};t.subscribe(m(o,y=>{s=!0,p=y,!(f&&!f.closed)&&(n?d():E(y))},()=>{c=!0,!(i&&s&&f&&!f.closed)&&o.complete()}))})}function Pe(r,e=V,t){let o=Or(r,e);return Ae(()=>o,t)}function Ot(...r){let e=K(r);return l((t,o)=>{let n=r.length,i=new Array(n),s=r.map(()=>!1),p=!1;for(let f=0;f<n;f++)x(r[f]).subscribe(m(o,c=>{i[f]=c,!p&&!s[f]&&(s[f]=!0,(p=s.every(v))&&(s=null))},R));t.subscribe(m(o,f=>{if(p){let c=[f,...i];o.next(e?e(...c):c)}}))})}export{It as a,Tt as b,At as c,Pt as d,jt as e,Ct as f,Ft as g,kt as h,w as i,jr as j,a as k,Ur as l,Dr as m,P as n,zr as o,Q as p,W as q,I as r,Je as s,Ze as t,Qe as u,D as v,j as w,st as x,z as y,B as z,wr as A,ft as B,pt as C,_t as D,C as E,Nr as F,lt as G,mt as H,wt as I,Z as J,Gr as K,ut as L,St as M,at as N,dt as O,Kr as P,xt as Q,bt as R,yt as S,Et as T,Oe as U,Ie as V,vt as W,Te as X,Pe as Y,Ot as Z};
