<!-- Loop through each chunk -->
@for (chunk of chunks; track $index) {
  <table class="chunk" [id]="'chunk-' + $index">
    <!-- Render index -->
    <tr>
      <td>&nbsp;</td>
      <td [attr.colspan]="split">{{ chunk.end }}</td>
    </tr>
    <!-- Render consensus -->
    <tr>
      <td>Consensus</td>
      @for(aa of consensus.slice(chunk.start, chunk.end); track $index) {
        <td [style.opacity]="asOpacity(aa[1])">{{ aa[0] }}</td>
      }
    </tr>
    <!-- Render alignment -->
    @for (sequence of sequences; track i; let i = $index) {
      <tr>
        <!-- First column: label -->
        <td>{{ labels && labels[i] }}</td>
        <!-- Other columns: amino acids -->
        @for(aa of sequence.slice(chunk.start, chunk.end); track j; let j = $index) {
          <td class="residue-code residue-code-{{ aa !== '--' ? aa : 'gap' }}">
            {{ aa.toUpperCase() }}
          </td>
        }
      </tr>
    }
  </table>
}