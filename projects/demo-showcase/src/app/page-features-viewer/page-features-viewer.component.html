<div class="container pt-3">
  <!-- Section: introduction -->
  <div class="mb-3">
    <h1>Feature viewer</h1>
    <p>
      The feature viewer allows you to represent features on a reference seqeunce...
    </p>
  </div>

  <div style="display: block; height: auto; overflow: hidden; width: 100%;">
    <ngx-features-viewer [sequence]="sequence" [traces]="traces" [settings]="(settings$ | async)!"
                         (selectedFeature)="onFeatureSelected($event)">
      <!-- Left label -->
      <ng-template let-trace="trace" ngx-features-viewer-label>
        <div class="d-flex h-100 w-100 justify-content-start pe-0 align-items-center font-monospace">
          <div [class.text-muted]="trace.nested?.length > 0 && !trace.expanded">
            {{ '&nbsp;'.repeat(trace.level) }}{{ trace.label }}
            @if (trace.nested?.length > 0) {
              <!-- Add symbol if expanded -->
              @if (trace.expanded) {
                <i class="bi bi-caret-down-fill"></i>
              } @else {
                <i class="bi bi-caret-right"></i>
              }
            }
          </div>
        </div>
      </ng-template>
      <!-- Right label -->
      <ng-template let-trace="trace" ngx-features-viewer-label where="right">
        <div class="d-flex h-100 w-100 justify-content-center align-items-center font-monospace">
          <button class="btn btn-sm btn-primary" (click)="onTraceButtonClick(trace)">Trace {{ trace.id }}</button>
        </div>
      </ng-template>
      <!-- Tooltip template -->
      <ng-template let-trace="trace" let-feature="feature" let-index="index" let-coordinates="coordinates"
                   ngx-features-viewer-tooltip>
        <div class="tooltipOuter">
          {{ feature.label }}
        </div>

        <!--          <ngx-features-viewer [sequence]="sequence" [settings]="settings.inner" [traces]="[trace]">-->
        <!--            &lt;!&ndash; Define simple label left &ndash;&gt;-->
        <!--            <ng-template let-trace="trace" ngx-features-viewer-label>-->
        <!--              <div class="d-flex h-100 w-100 justify-content-start pe-0 align-items-center font-monospace">-->
        <!--                {{ trace.label }}-->
        <!--              </div>-->
        <!--            </ng-template>-->
        <!--          </ngx-features-viewer>-->
      </ng-template>
    </ngx-features-viewer>
  </div>
  <!--  </div>-->
</div>
